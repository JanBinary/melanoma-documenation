<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Uemann, Pöppelbaum">

<title>Datenexploration – Melanoma</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-662ae1889177880cb371f83234c0a158.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5fc2487999df2b68d0defd4bca0b10e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../kapitel/datenexploration.html">Datenexploration</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Melanoma</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../kapitel/einfuehrung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Einleitung</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../kapitel/grundlagen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grundlagen</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../kapitel/datenexploration.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Datenexploration</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../kapitel/modellentwicklung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellentwicklung</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../kapitel/diskussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Diskussion der Ergebnisse</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Melanoma Präsentation</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Auf dieser Seite</h2>
   
  <ul>
  <li><a href="#sec-erklaerung_datensatz" id="toc-sec-erklaerung_datensatz" class="nav-link active" data-scroll-target="#sec-erklaerung_datensatz">Erklärung des Datensatzes</a></li>
  <li><a href="#sec-metriken" id="toc-sec-metriken" class="nav-link" data-scroll-target="#sec-metriken">Analyse von statistischen Metriken</a>
  <ul class="collapse">
  <li><a href="#diagnoseverteilung-der-läsionen-nach-geschlecht" id="toc-diagnoseverteilung-der-läsionen-nach-geschlecht" class="nav-link" data-scroll-target="#diagnoseverteilung-der-läsionen-nach-geschlecht">Diagnoseverteilung der Läsionen nach Geschlecht</a></li>
  <li><a href="#verteilung-des-alters-der-probanten-nach-geschlecht" id="toc-verteilung-des-alters-der-probanten-nach-geschlecht" class="nav-link" data-scroll-target="#verteilung-des-alters-der-probanten-nach-geschlecht">Verteilung des Alters der Probanten nach Geschlecht</a></li>
  <li><a href="#verteilung-der-diagnosemethoden-nach-geschlecht" id="toc-verteilung-der-diagnosemethoden-nach-geschlecht" class="nav-link" data-scroll-target="#verteilung-der-diagnosemethoden-nach-geschlecht">Verteilung der Diagnosemethoden nach Geschlecht</a></li>
  <li><a href="#verteilung-der-körperstellen-nach-alter" id="toc-verteilung-der-körperstellen-nach-alter" class="nav-link" data-scroll-target="#verteilung-der-körperstellen-nach-alter">Verteilung der Körperstellen nach Alter</a></li>
  <li><a href="#verteilung-der-körperstellen-nach-diagnose" id="toc-verteilung-der-körperstellen-nach-diagnose" class="nav-link" data-scroll-target="#verteilung-der-körperstellen-nach-diagnose">Verteilung der Körperstellen nach Diagnose</a></li>
  <li><a href="#verteilung-der-diagnosen-nach-alter" id="toc-verteilung-der-diagnosen-nach-alter" class="nav-link" data-scroll-target="#verteilung-der-diagnosen-nach-alter">Verteilung der Diagnosen nach Alter</a></li>
  <li><a href="#beispielfotos-anhand-häufig-auftretender-attribute" id="toc-beispielfotos-anhand-häufig-auftretender-attribute" class="nav-link" data-scroll-target="#beispielfotos-anhand-häufig-auftretender-attribute">Beispielfotos anhand häufig auftretender Attribute</a></li>
  </ul></li>
  <li><a href="#analyse-von-abhängigkeiten-und-auffälligkeiten" id="toc-analyse-von-abhängigkeiten-und-auffälligkeiten" class="nav-link" data-scroll-target="#analyse-von-abhängigkeiten-und-auffälligkeiten">Analyse von Abhängigkeiten und Auffälligkeiten</a>
  <ul class="collapse">
  <li><a href="#sec-korrelation" id="toc-sec-korrelation" class="nav-link" data-scroll-target="#sec-korrelation">Korrelationsanalyse nach Spearman</a></li>
  <li><a href="#anzahl-der-gefährlichen-diagnosen-nach-alter" id="toc-anzahl-der-gefährlichen-diagnosen-nach-alter" class="nav-link" data-scroll-target="#anzahl-der-gefährlichen-diagnosen-nach-alter">Anzahl der gefährlichen Diagnosen nach Alter</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Datenexploration</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Uemann, Pöppelbaum </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">13. April 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="sec-erklaerung_datensatz" class="level1">
<h1>Erklärung des Datensatzes</h1>
<p>HAM10000 ist ein eine Sammlung von 10.015 dermatoskopischen Bildern, welche aus mehreren verschiedenen Quellen zu einem Datensatz im Harvard Dataverse zusammengetragen wurden.</p>
<div class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>metadata_df</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-datensatz" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="2">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-datensatz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;1: Aufbau des Datensatzes
</figcaption>
<div aria-describedby="tbl-datensatz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">lesion_id</th>
<th data-quarto-table-cell-role="th">image_id</th>
<th data-quarto-table-cell-role="th">dx</th>
<th data-quarto-table-cell-role="th">dx_type</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">sex</th>
<th data-quarto-table-cell-role="th">localization</th>
<th data-quarto-table-cell-role="th">age_group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>HAM_0000118</td>
<td>ISIC_0027419</td>
<td>bkl</td>
<td>histo</td>
<td>80.0</td>
<td>male</td>
<td>scalp</td>
<td>61-80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>HAM_0000118</td>
<td>ISIC_0025030</td>
<td>bkl</td>
<td>histo</td>
<td>80.0</td>
<td>male</td>
<td>scalp</td>
<td>61-80</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>HAM_0002730</td>
<td>ISIC_0026769</td>
<td>bkl</td>
<td>histo</td>
<td>80.0</td>
<td>male</td>
<td>scalp</td>
<td>61-80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>HAM_0002730</td>
<td>ISIC_0025661</td>
<td>bkl</td>
<td>histo</td>
<td>80.0</td>
<td>male</td>
<td>scalp</td>
<td>61-80</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>HAM_0001466</td>
<td>ISIC_0031633</td>
<td>bkl</td>
<td>histo</td>
<td>75.0</td>
<td>male</td>
<td>ear</td>
<td>61-80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10010</td>
<td>HAM_0002867</td>
<td>ISIC_0033084</td>
<td>akiec</td>
<td>histo</td>
<td>40.0</td>
<td>male</td>
<td>abdomen</td>
<td>21-40</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10011</td>
<td>HAM_0002867</td>
<td>ISIC_0033550</td>
<td>akiec</td>
<td>histo</td>
<td>40.0</td>
<td>male</td>
<td>abdomen</td>
<td>21-40</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10012</td>
<td>HAM_0002867</td>
<td>ISIC_0033536</td>
<td>akiec</td>
<td>histo</td>
<td>40.0</td>
<td>male</td>
<td>abdomen</td>
<td>21-40</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10013</td>
<td>HAM_0000239</td>
<td>ISIC_0032854</td>
<td>akiec</td>
<td>histo</td>
<td>80.0</td>
<td>male</td>
<td>face</td>
<td>61-80</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10014</td>
<td>HAM_0003521</td>
<td>ISIC_0032258</td>
<td>mel</td>
<td>histo</td>
<td>70.0</td>
<td>female</td>
<td>back</td>
<td>61-80</td>
</tr>
</tbody>
</table>

<p>10015 rows × 8 columns</p>
</div>
</div>
</div>
</figure>
</div>
</div>
<p>In der oben abgebildeten Tabelle wird ein Ausschnitt des Datensatzes exemplarisch Abgebildet. Er besteht aus 10.015 Zeilen mit sieben Spalten. Entsprechend werden in dem Datensatz sieben unterschiedliche Attribute verwendet, um die dermatologischen Bilder zu identifizieren und klassifizieren. Die Attribute, welche im folgendenen näher erläutert werden sind lesion_id, image_id, dx, dx_type, age, sex und localization.</p>
<p><strong>lesion_id</strong> dient zur Identifikation der jeweils betrachtenden Hautläsionen. Insgesamt werden in diesem Datensatz 7.470 verschiedene Hautläsionen betrachtet, um über entsprechende lesion_id identifiziert. Die Differenz von 2.545 Einträgen entsteht durch die mehrfache Betrachtung von einzelnen Hautläsionen.</p>
<p>Die <strong>image_id</strong>, wie die lesion_id, wird ebenfalls zur eindeutigen Identifikation verwendet. Im diesem Fall werden die dermatoskopischen Bilder identifiziert.</p>
<p><strong>dx</strong> gibt an, womit die abgebildeten Hautläsionen diagnostiziert wurden. Die im Datensatz verwendeten Kürzel werden in folgender Tabelle genauer erklärt. Insgesamt werden kommen in diesem Datensatz sieben verschiedene Diagnosen vor.</p>
<div id="tbl-diagnosen" class="hover striped quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-diagnosen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;2: Diagnosekategorien
</figcaption>
<div aria-describedby="tbl-diagnosen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-striped caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Kürzel</th>
<th>Diagnosekategorie</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>akiec</td>
<td>Aktinische Keratosen und intraepitheliales Karzinom / Bowen-Krankheit</td>
</tr>
<tr class="even">
<td>bcc</td>
<td>Basalzellkarzinom</td>
</tr>
<tr class="odd">
<td>bkl</td>
<td>Keratosen-ähnliche Läsionen (Sonnenlentigines / seborrhoische Keratosen und lichen-planus-ähnliche Keratosen)</td>
</tr>
<tr class="even">
<td>df</td>
<td>Dermatofibrom</td>
</tr>
<tr class="odd">
<td>nv</td>
<td>Melanozytische Nävi (Muttermal)</td>
</tr>
<tr class="even">
<td>mel</td>
<td>Melanom</td>
</tr>
<tr class="odd">
<td>vasc</td>
<td>Gefäßläsionen (Angiome, Angiokeratome, pyogene Granulome und Blutungen)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>dx_type</strong> definiert, wie die jeweilige Diagnose erreicht beziehungsweise welche Diagnosemethode verwendet wurde.</p>
<div id="tbl-diagnosemethoden" class="hover striped quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-diagnosemethoden-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;3: Diagnosemethoden
</figcaption>
<div aria-describedby="tbl-diagnosemethoden-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-striped caption-top table">
<thead>
<tr class="header">
<th>Kürzel</th>
<th>Diagnosemethode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>confocal</td>
<td>Histopathologie</td>
</tr>
<tr class="even">
<td>consensus</td>
<td>Expertenkonsens</td>
</tr>
<tr class="odd">
<td>follow_up</td>
<td>Nachuntersuchungen</td>
</tr>
<tr class="even">
<td>histo</td>
<td>Histopathologie</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>age</strong> und <strong>sex</strong> beschreiben jeweils das Alter und das geschlecht der Personen, dessen Bilder und diagnosen in diesem Datensatz gesammelt wurden. Diese beiden Attribute stellen gleichzeitig die einzigen personenbezogenen Daten dar, welche im HAM10000 zu verfügung stehen.</p>
<p><strong>localization</strong> gibt an, an welcher Stelle des Körpers die entsprechende Hautläsion lokalisiert wurde. In der folgenden Tabelle werden die im Datensatz notierten Körperstellen aufgelistet und übersetzt.</p>
<div id="tbl-koerperstellen" class="hover striped quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-koerperstellen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;4: Körperstellen
</figcaption>
<div aria-describedby="tbl-koerperstellen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table-hover table-striped caption-top table">
<thead>
<tr class="header">
<th>Bezeichnung in Datensatz</th>
<th>Übersetzung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>scalp</td>
<td>Kopfhaut</td>
</tr>
<tr class="even">
<td>face</td>
<td>Gesicht</td>
</tr>
<tr class="odd">
<td>ear</td>
<td>Ohr</td>
</tr>
<tr class="even">
<td>neck</td>
<td>Hals</td>
</tr>
<tr class="odd">
<td>chest</td>
<td>Brust</td>
</tr>
<tr class="even">
<td>back</td>
<td>Rücken</td>
</tr>
<tr class="odd">
<td>trunk</td>
<td>Rumpf</td>
</tr>
<tr class="even">
<td>abdomen</td>
<td>Bauch</td>
</tr>
<tr class="odd">
<td>upper extremity</td>
<td>Obere Extremität</td>
</tr>
<tr class="even">
<td>lower extremity</td>
<td>Untere Extremität</td>
</tr>
<tr class="odd">
<td>hand</td>
<td>Hand</td>
</tr>
<tr class="even">
<td>foot</td>
<td>Fuß</td>
</tr>
<tr class="odd">
<td>arm</td>
<td>Arm</td>
</tr>
<tr class="even">
<td>leg</td>
<td>Bein</td>
</tr>
<tr class="odd">
<td>acral</td>
<td>Akral (Finger, Zehen etc.)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="sec-metriken" class="level1">
<h1>Analyse von statistischen Metriken</h1>
<p>In diesem Kapitel werden die Diagnosen <code>mel</code>, <code>bcc</code> und <code>akiec</code> (siehe <a href="#sec-erklaerung_datensatz" class="quarto-xref">Kapitel&nbsp;1</a>) als gefährlich kategorisiert <span class="citation" data-cites="HAM100002018"><a href="#ref-HAM100002018" role="doc-biblioref">[1]</a></span>. Folglich wird in einigen Visualisierungen zwischen gefährlichen und ungefährlichen Diagnosen unterschieden. Die Frage, welche primär beantwortet werden soll ist, ob bereits an den Metadaten eine gefährdete Gruppe ausgemacht werden kann. Nach Identifikation einer gefährdeten Gruppe wird analysiert, welche Attribute der Probanten besonders ins Gewicht fallen.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Basalzellkarzinom</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Melanom</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Aktinische Keratose</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="fig-bcc" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bcc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/ISIC_0024848.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bcc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;1: Basalzelkarzinom
</figcaption>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="fig-mel" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/ISIC_0031377.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;2: Melanom
</figcaption>
</figure>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="fig-akiec" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-akiec-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/ISIC_0032371.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-akiec-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;3: Aktinische Keratose
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<section id="diagnoseverteilung-der-läsionen-nach-geschlecht" class="level2">
<h2 class="anchored" data-anchor-id="diagnoseverteilung-der-läsionen-nach-geschlecht">Diagnoseverteilung der Läsionen nach Geschlecht</h2>
<p>Die Definitionen der Kürzel, welche eine Diagnose repräsentieren sind in <a href="#tbl-diagnosen" class="quarto-xref">Tabelle&nbsp;2</a> zusammengefasst. Wie in <a href="#fig-diagnoseverteilung" class="quarto-xref">Abbildung&nbsp;4</a> zu erkennen ist, dominiert die Diagnose <code>nv</code> den Datensatz. Diese repräsentiert 66.95% der Diagnosen. Das Verhältnis der Geschlechter <code>male</code> zu <code>female</code> beträgt 5406 / 4552. Demnach sind mänlichen Probanten im Datensatz leicht überrepresentiert. Die gefährlichen Diagnosen machen 19.51% des Datensatzes aus und das Verhältnis der Geschlechter <code>male</code> zu <code>female</code> beträgt unter diesen 1227 / 727. Daraus folgt, dass die männlichen Probanten in der Gruppe von Probanten mit gefährlichen Diagnosen höher representiert ist, als im gesamten Datensatz.</p>
<div id="cell-fig-diagnoseverteilung" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb2-2"><a href="#cb2-2"></a>sns.histplot(</span>
<span id="cb2-3"><a href="#cb2-3"></a>    data<span class="op">=</span>metadata_df,</span>
<span id="cb2-4"><a href="#cb2-4"></a>    x<span class="op">=</span><span class="st">'dx'</span>,</span>
<span id="cb2-5"><a href="#cb2-5"></a>    hue<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>    palette<span class="op">=</span>GENDER_PALETTE,</span>
<span id="cb2-8"><a href="#cb2-8"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>)</span>
<span id="cb2-10"><a href="#cb2-10"></a>plt.xlabel(<span class="st">'Diagnose'</span>)</span>
<span id="cb2-11"><a href="#cb2-11"></a>plt.ylabel(<span class="st">'Anzahl Läsionen'</span>)</span>
<span id="cb2-12"><a href="#cb2-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-diagnoseverteilung" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-diagnoseverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-diagnoseverteilung-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diagnoseverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4: Verteilung der Diagnosen nach Geschlecht
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="verteilung-des-alters-der-probanten-nach-geschlecht" class="level2">
<h2 class="anchored" data-anchor-id="verteilung-des-alters-der-probanten-nach-geschlecht">Verteilung des Alters der Probanten nach Geschlecht</h2>
<p>Anhand von <a href="#fig-altersverteilung" class="quarto-xref">Abbildung&nbsp;5</a> lässt sich erkennen, dass das mittlere Alter der Probanten im gesamten Datensatz 51.86 Jahre beträgt (16.97 Jahre Standardabweichung). In der Gruppe der Probanten mit gefährlichen Diagnosen beträgt das mittlere Alter 63.28 (14.53 Jahre Standardabweichung). Eine Visualisierung dieses Zusammenhangs findet sich in <a href="#fig-altersverteilung-gefaehrliche-diagnosen" class="quarto-xref">Abbildung&nbsp;14</a>.</p>
<div id="cell-fig-altersverteilung" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb3-2"><a href="#cb3-2"></a>sns.histplot(</span>
<span id="cb3-3"><a href="#cb3-3"></a>    data<span class="op">=</span>metadata_df,</span>
<span id="cb3-4"><a href="#cb3-4"></a>    x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>    hue<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb3-6"><a href="#cb3-6"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb3-7"><a href="#cb3-7"></a>    bins<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb3-8"><a href="#cb3-8"></a>    palette<span class="op">=</span>GENDER_PALETTE,</span>
<span id="cb3-9"><a href="#cb3-9"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb3-10"><a href="#cb3-10"></a>    ax<span class="op">=</span>ax[<span class="dv">0</span>]</span>
<span id="cb3-11"><a href="#cb3-11"></a>)</span>
<span id="cb3-12"><a href="#cb3-12"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Altersverteilung'</span>)</span>
<span id="cb3-13"><a href="#cb3-13"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Anzahl Läsionen'</span>)</span>
<span id="cb3-14"><a href="#cb3-14"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Alter'</span>)</span>
<span id="cb3-15"><a href="#cb3-15"></a>sns.histplot(</span>
<span id="cb3-16"><a href="#cb3-16"></a>    data<span class="op">=</span>metadata_dangerous_df,</span>
<span id="cb3-17"><a href="#cb3-17"></a>    x<span class="op">=</span><span class="st">'age'</span>,</span>
<span id="cb3-18"><a href="#cb3-18"></a>    hue<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb3-19"><a href="#cb3-19"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb3-20"><a href="#cb3-20"></a>    bins<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb3-21"><a href="#cb3-21"></a>    palette<span class="op">=</span>GENDER_PALETTE,</span>
<span id="cb3-22"><a href="#cb3-22"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb3-23"><a href="#cb3-23"></a>    legend<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb3-24"><a href="#cb3-24"></a>    ax<span class="op">=</span>ax[<span class="dv">1</span>]</span>
<span id="cb3-25"><a href="#cb3-25"></a>)</span>
<span id="cb3-26"><a href="#cb3-26"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Altersverteilung (gefährl. Diagnosen)'</span>)</span>
<span id="cb3-27"><a href="#cb3-27"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">''</span>)</span>
<span id="cb3-28"><a href="#cb3-28"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Alter'</span>)</span>
<span id="cb3-29"><a href="#cb3-29"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-altersverteilung" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-altersverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-altersverteilung-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-altersverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;5: Verteilung des Alters nach Geschlecht
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="verteilung-der-diagnosemethoden-nach-geschlecht" class="level2">
<h2 class="anchored" data-anchor-id="verteilung-der-diagnosemethoden-nach-geschlecht">Verteilung der Diagnosemethoden nach Geschlecht</h2>
<p>Die Definition der Kürzel, welche Diagnosemethoden representieren ist in <a href="#tbl-diagnosemethoden" class="quarto-xref">Tabelle&nbsp;3</a> zusammengefasst. <a href="#fig-diagnosemethodenverteilung" class="quarto-xref">Abbildung&nbsp;6</a> zeigt, dass die Diagnosemethode <code>histo</code> den Datensatz mit einem Anteil von 53.32% dominiert. Zudem werden gefährliche Diagnosen ausschließlich über die Diagnosemethode <code>histo</code> diagnostiziert.</p>
<div id="cell-fig-diagnosemethodenverteilung" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb4-2"><a href="#cb4-2"></a>sns.histplot(</span>
<span id="cb4-3"><a href="#cb4-3"></a>    data<span class="op">=</span>metadata_df,</span>
<span id="cb4-4"><a href="#cb4-4"></a>    x<span class="op">=</span><span class="st">'dx_type'</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>    hue<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb4-6"><a href="#cb4-6"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>    palette<span class="op">=</span>GENDER_PALETTE,</span>
<span id="cb4-8"><a href="#cb4-8"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb4-9"><a href="#cb4-9"></a>    ax<span class="op">=</span>ax[<span class="dv">0</span>]</span>
<span id="cb4-10"><a href="#cb4-10"></a>)</span>
<span id="cb4-11"><a href="#cb4-11"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Diagnosemethoden'</span>)</span>
<span id="cb4-12"><a href="#cb4-12"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Anzahl Läsionen'</span>)</span>
<span id="cb4-13"><a href="#cb4-13"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Diagnosemethode'</span>)</span>
<span id="cb4-14"><a href="#cb4-14"></a>sns.histplot(</span>
<span id="cb4-15"><a href="#cb4-15"></a>    data<span class="op">=</span>metadata_dangerous_df,</span>
<span id="cb4-16"><a href="#cb4-16"></a>    x<span class="op">=</span><span class="st">'dx_type'</span>,</span>
<span id="cb4-17"><a href="#cb4-17"></a>    hue<span class="op">=</span><span class="st">'sex'</span>,</span>
<span id="cb4-18"><a href="#cb4-18"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb4-19"><a href="#cb4-19"></a>    palette<span class="op">=</span>GENDER_PALETTE,</span>
<span id="cb4-20"><a href="#cb4-20"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb4-21"><a href="#cb4-21"></a>    legend<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb4-22"><a href="#cb4-22"></a>    ax<span class="op">=</span>ax[<span class="dv">1</span>]</span>
<span id="cb4-23"><a href="#cb4-23"></a>)</span>
<span id="cb4-24"><a href="#cb4-24"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Diagnosemethoden (gefährl. Diagnosen)'</span>)</span>
<span id="cb4-25"><a href="#cb4-25"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">''</span>)</span>
<span id="cb4-26"><a href="#cb4-26"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Diagnosemethode'</span>)</span>
<span id="cb4-27"><a href="#cb4-27"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-diagnosemethodenverteilung" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-diagnosemethodenverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-diagnosemethodenverteilung-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diagnosemethodenverteilung-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;6: Verteilung der Diagnosemethoden nach Geschlecht
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="verteilung-der-körperstellen-nach-alter" class="level2">
<h2 class="anchored" data-anchor-id="verteilung-der-körperstellen-nach-alter">Verteilung der Körperstellen nach Alter</h2>
<p>Eine Übersicht der im Datensatz aufgeführten Körperstellen befindet sich in <a href="#tbl-koerperstellen" class="quarto-xref">Tabelle&nbsp;4</a>. Anhand von <a href="#fig-koerperstellen-atler" class="quarto-xref">Abbildung&nbsp;7</a> lässt sich erkennen, dass in der Altersgruppe mit den meisten Läsionen (41-60 Jahre) häufig die Körperstellen <code>lower extremity</code>, <code>back</code>, <code>trunk</code>, <code>abdomen</code> und <code>upper extrmity</code> betroffen sind.</p>
<div id="cell-fig-koerperstellen-atler" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb5-2"><a href="#cb5-2"></a>heatmap_data <span class="op">=</span> pd.crosstab(metadata_df[<span class="st">'localization'</span>], metadata_df[<span class="st">'age_group'</span>])</span>
<span id="cb5-3"><a href="#cb5-3"></a>sns.heatmap(</span>
<span id="cb5-4"><a href="#cb5-4"></a>    data<span class="op">=</span>heatmap_data,</span>
<span id="cb5-5"><a href="#cb5-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb5-6"><a href="#cb5-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb5-7"><a href="#cb5-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>)</span>
<span id="cb5-9"><a href="#cb5-9"></a>plt.title(<span class="st">'Körperstelle / Alter'</span>)</span>
<span id="cb5-10"><a href="#cb5-10"></a>plt.xlabel(<span class="st">'Altersgruppe'</span>)</span>
<span id="cb5-11"><a href="#cb5-11"></a>plt.ylabel(<span class="st">'Körperstelle'</span>)</span>
<span id="cb5-12"><a href="#cb5-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-koerperstellen-atler" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-koerperstellen-atler-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-koerperstellen-atler-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-koerperstellen-atler-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;7: Verteleilung der Körperstellen nach Atler
</figcaption>
</figure>
</div>
</div>
</div>
<p>Nach Reduktion der Metadaten auf Datensätze mit gefährlichen Diagnosen (siehe <a href="#fig-koerperstellen-atler-gefaehrlich" class="quarto-xref">Abbildung&nbsp;8</a>) ist die neue dominierende Altersgruppe, wie <a href="#fig-altersverteilung" class="quarto-xref">Abbildung&nbsp;5</a> und <a href="#fig-altersverteilung-gefaehrliche-diagnosen" class="quarto-xref">Abbildung&nbsp;14</a> andeuten lassen, 61-80 Jahre. Die betroffenen Körperstellen unter den 61-80 Jährigen mit gefährlichen Diagnosen sind demnach <code>back</code>, <code>face</code>, <code>upper extremity</code> und <code>lower extremity</code>.</p>
<div id="cell-fig-koerperstellen-atler-gefaehrlich" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb6-2"><a href="#cb6-2"></a>heatmap_dangerous_data <span class="op">=</span> pd.crosstab(metadata_dangerous_df[<span class="st">'localization'</span>], metadata_dangerous_df[<span class="st">'age_group'</span>])</span>
<span id="cb6-3"><a href="#cb6-3"></a>sns.heatmap(</span>
<span id="cb6-4"><a href="#cb6-4"></a>    data<span class="op">=</span>heatmap_dangerous_data,</span>
<span id="cb6-5"><a href="#cb6-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb6-6"><a href="#cb6-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb6-7"><a href="#cb6-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>)</span>
<span id="cb6-9"><a href="#cb6-9"></a>plt.title(<span class="st">'Körperstelle / Alter (gefährl. Diagnosen)'</span>)</span>
<span id="cb6-10"><a href="#cb6-10"></a>plt.xlabel(<span class="st">'Altersgruppe'</span>)</span>
<span id="cb6-11"><a href="#cb6-11"></a>plt.ylabel(<span class="st">'Körperstelle'</span>)</span>
<span id="cb6-12"><a href="#cb6-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-koerperstellen-atler-gefaehrlich" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-koerperstellen-atler-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-koerperstellen-atler-gefaehrlich-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-koerperstellen-atler-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;8: Verteleilung der Körperstellen nach Atler (gefährl. Diagnosen)
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="verteilung-der-körperstellen-nach-diagnose" class="level2">
<h2 class="anchored" data-anchor-id="verteilung-der-körperstellen-nach-diagnose">Verteilung der Körperstellen nach Diagnose</h2>
<p>Anhand von <a href="#fig-koerperstellen-diagnose" class="quarto-xref">Abbildung&nbsp;9</a> lässt sich erkennen, dass der Datensatz bei einer Betrachtung nach Körperstelle <a href="#tbl-koerperstellen" class="quarto-xref">Tabelle&nbsp;4</a> und Diagnosen <a href="#tbl-diagnosen" class="quarto-xref">Tabelle&nbsp;2</a> über 3 Extrema verfügt, welche 41.41% des Datensatzes repräsentieren. Es handelt sich um die Diagnose <code>nv</code> and den Körperstellen <code>back</code>, <code>lower extremity</code> und <code>trunk</code>.</p>
<div id="cell-fig-koerperstellen-diagnose" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb7-2"><a href="#cb7-2"></a>heatmap_data <span class="op">=</span> pd.crosstab(metadata_df[<span class="st">'localization'</span>], metadata_df[<span class="st">'dx'</span>])</span>
<span id="cb7-3"><a href="#cb7-3"></a>sns.heatmap(</span>
<span id="cb7-4"><a href="#cb7-4"></a>    data<span class="op">=</span>heatmap_data,</span>
<span id="cb7-5"><a href="#cb7-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>)</span>
<span id="cb7-9"><a href="#cb7-9"></a>plt.title(<span class="st">'Körperstelle / Diagnose'</span>)</span>
<span id="cb7-10"><a href="#cb7-10"></a>plt.xlabel(<span class="st">'Diagnose'</span>)</span>
<span id="cb7-11"><a href="#cb7-11"></a>plt.ylabel(<span class="st">'Körperstelle'</span>)</span>
<span id="cb7-12"><a href="#cb7-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-koerperstellen-diagnose" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-koerperstellen-diagnose-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-koerperstellen-diagnose-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-koerperstellen-diagnose-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;9: Verteleilung der Körperstellen nach Diagnose
</figcaption>
</figure>
</div>
</div>
</div>
<p>Reduziert auf die gefährlichen Fälle ist die häufigste Diagnose <code>mel</code> (siehe <a href="#fig-diagnosen-gefaehrlich" class="quarto-xref">Abbildung&nbsp;11</a>). Diese tritt dominant an den Körperstellen <code>back</code>, <code>upper extremity</code> und <code>lower extremity</code> auf.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Heatmap Körperstellen</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Anteil Diagnosen</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div id="cell-fig-koerperstellen-diagnose-gefaehrlich" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb8-2"><a href="#cb8-2"></a>heatmap_dangerous_data <span class="op">=</span> pd.crosstab(metadata_dangerous_df[<span class="st">'localization'</span>], metadata_dangerous_df[<span class="st">'dx'</span>])</span>
<span id="cb8-3"><a href="#cb8-3"></a>sns.heatmap(</span>
<span id="cb8-4"><a href="#cb8-4"></a>    data<span class="op">=</span>heatmap_dangerous_data,</span>
<span id="cb8-5"><a href="#cb8-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb8-6"><a href="#cb8-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb8-7"><a href="#cb8-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>)</span>
<span id="cb8-9"><a href="#cb8-9"></a>plt.title(<span class="st">'Körperstelle / Diagnose (gefährl. Diagnosen)'</span>)</span>
<span id="cb8-10"><a href="#cb8-10"></a>plt.xlabel(<span class="st">'Diagnose'</span>)</span>
<span id="cb8-11"><a href="#cb8-11"></a>plt.ylabel(<span class="st">'Körperstelle'</span>)</span>
<span id="cb8-12"><a href="#cb8-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-koerperstellen-diagnose-gefaehrlich" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-koerperstellen-diagnose-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-koerperstellen-diagnose-gefaehrlich-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-koerperstellen-diagnose-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;10: Verteleilung der Körperstellen nach Diagnose (gefährl. Diagnosen)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div id="cell-fig-diagnosen-gefaehrlich" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>dangerous_dx_counts <span class="op">=</span> metadata_dangerous_df[<span class="st">'dx'</span>].value_counts()</span>
<span id="cb9-2"><a href="#cb9-2"></a>total_dangerous <span class="op">=</span> dangerous_dx_counts.<span class="bu">sum</span>()</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a>labels <span class="op">=</span> [<span class="ss">f"</span><span class="sc">{</span>dx<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">/</span><span class="sc">{</span>total_dangerous<span class="sc">}</span><span class="ss">)"</span> <span class="cf">for</span> dx, count <span class="kw">in</span> dangerous_dx_counts.items()]</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb9-7"><a href="#cb9-7"></a>plt.pie(</span>
<span id="cb9-8"><a href="#cb9-8"></a>    dangerous_dx_counts,</span>
<span id="cb9-9"><a href="#cb9-9"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb9-10"><a href="#cb9-10"></a>    autopct<span class="op">=</span><span class="st">'</span><span class="sc">%1.1f%%</span><span class="st">'</span>,</span>
<span id="cb9-11"><a href="#cb9-11"></a>    startangle<span class="op">=</span><span class="dv">140</span>,</span>
<span id="cb9-12"><a href="#cb9-12"></a>    colors<span class="op">=</span>sns.color_palette(<span class="st">'Reds'</span>, n_colors<span class="op">=</span><span class="bu">len</span>(dangerous_dx_counts))</span>
<span id="cb9-13"><a href="#cb9-13"></a>)</span>
<span id="cb9-14"><a href="#cb9-14"></a>plt.axis(<span class="st">'equal'</span>)</span>
<span id="cb9-15"><a href="#cb9-15"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-diagnosen-gefaehrlich" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-diagnosen-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-diagnosen-gefaehrlich-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-diagnosen-gefaehrlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;11: Anteil gefährlicher Diagnosen unter allen gefährlichen Fällen
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Betrachtet man jedoch alle Fälle gruppiert nach Körperstelle, wie in <a href="#tbl-koerperstellen-gefaerlich" class="quarto-xref">Tabelle&nbsp;5</a>, so lassen sich an der Körperstelle <code>face</code> am häufigsten gefährliche Diagnosen verorten.</p>
<div class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>metadata_df[<span class="st">'is_dangerous'</span>] <span class="op">=</span> metadata_df[<span class="st">'dx'</span>].isin(dangerous_dx)</span>
<span id="cb10-2"><a href="#cb10-2"></a>dangerous_share_per_localization <span class="op">=</span> (</span>
<span id="cb10-3"><a href="#cb10-3"></a>    pd.DataFrame({</span>
<span id="cb10-4"><a href="#cb10-4"></a>        <span class="st">'dangerous_share_percent'</span>: (</span>
<span id="cb10-5"><a href="#cb10-5"></a>            metadata_df</span>
<span id="cb10-6"><a href="#cb10-6"></a>            .groupby(<span class="st">'localization'</span>)[<span class="st">'is_dangerous'</span>]</span>
<span id="cb10-7"><a href="#cb10-7"></a>            .mean()</span>
<span id="cb10-8"><a href="#cb10-8"></a>            .sort_values(ascending<span class="op">=</span><span class="va">False</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>        )</span>
<span id="cb10-10"><a href="#cb10-10"></a>    })</span>
<span id="cb10-11"><a href="#cb10-11"></a>    .<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb10-12"><a href="#cb10-12"></a>    .reset_index()</span>
<span id="cb10-13"><a href="#cb10-13"></a>)</span>
<span id="cb10-14"><a href="#cb10-14"></a></span>
<span id="cb10-15"><a href="#cb10-15"></a>dangerous_share_per_localization</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-koerperstellen-gefaerlich" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="11">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-koerperstellen-gefaerlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;5: Ranking der Körperstellen mit den meisten gefährlichen Diagnosen
</figcaption>
<div aria-describedby="tbl-koerperstellen-gefaerlich-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">localization</th>
<th data-quarto-table-cell-role="th">dangerous_share_percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>face</td>
<td>42.68</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>scalp</td>
<td>36.72</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>ear</td>
<td>35.71</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>neck</td>
<td>31.55</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>chest</td>
<td>31.20</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>upper extremity</td>
<td>28.98</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>back</td>
<td>24.59</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>hand</td>
<td>17.78</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>lower extremity</td>
<td>15.17</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>foot</td>
<td>10.03</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>abdomen</td>
<td>8.71</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>unknown</td>
<td>6.41</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>trunk</td>
<td>4.20</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>acral</td>
<td>0.00</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>genital</td>
<td>0.00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="verteilung-der-diagnosen-nach-alter" class="level2">
<h2 class="anchored" data-anchor-id="verteilung-der-diagnosen-nach-alter">Verteilung der Diagnosen nach Alter</h2>
<div id="8514a765" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb11-2"><a href="#cb11-2"></a>heatmap_data <span class="op">=</span> pd.crosstab(metadata_df[<span class="st">'dx'</span>], metadata_df[<span class="st">'age_group'</span>])</span>
<span id="cb11-3"><a href="#cb11-3"></a>sns.heatmap(</span>
<span id="cb11-4"><a href="#cb11-4"></a>    data<span class="op">=</span>heatmap_data,</span>
<span id="cb11-5"><a href="#cb11-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>)</span>
<span id="cb11-9"><a href="#cb11-9"></a>plt.title(<span class="st">'Diagnose / Alter'</span>)</span>
<span id="cb11-10"><a href="#cb11-10"></a>plt.xlabel(<span class="st">'Altersgruppe'</span>)</span>
<span id="cb11-11"><a href="#cb11-11"></a>plt.ylabel(<span class="st">'Diagnose'</span>)</span>
<span id="cb11-12"><a href="#cb11-12"></a>plt.yticks(rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb11-13"><a href="#cb11-13"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="datenexploration_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="91520b93" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb12-2"><a href="#cb12-2"></a>heatmap_dangerous_data <span class="op">=</span> pd.crosstab(metadata_dangerous_df[<span class="st">'dx'</span>], metadata_df[<span class="st">'age_group'</span>])</span>
<span id="cb12-3"><a href="#cb12-3"></a>sns.heatmap(</span>
<span id="cb12-4"><a href="#cb12-4"></a>    data<span class="op">=</span>heatmap_dangerous_data,</span>
<span id="cb12-5"><a href="#cb12-5"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb12-6"><a href="#cb12-6"></a>    cmap<span class="op">=</span><span class="st">'Reds'</span>,</span>
<span id="cb12-7"><a href="#cb12-7"></a>    fmt<span class="op">=</span><span class="st">'d'</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>)</span>
<span id="cb12-9"><a href="#cb12-9"></a>plt.title(<span class="st">'Diagnose / Alter (gefährl. Diagnosen)'</span>)</span>
<span id="cb12-10"><a href="#cb12-10"></a>plt.xlabel(<span class="st">'Altersgruppe'</span>)</span>
<span id="cb12-11"><a href="#cb12-11"></a>plt.ylabel(<span class="st">'Diagnose'</span>)</span>
<span id="cb12-12"><a href="#cb12-12"></a>plt.yticks(rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb12-13"><a href="#cb12-13"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="datenexploration_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="beispielfotos-anhand-häufig-auftretender-attribute" class="level2">
<h2 class="anchored" data-anchor-id="beispielfotos-anhand-häufig-auftretender-attribute">Beispielfotos anhand häufig auftretender Attribute</h2>
<div id="227f1109" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>all_images <span class="op">=</span> os.listdir(<span class="st">'../images'</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a>isic_images <span class="op">=</span> [file_name <span class="cf">for</span> file_name <span class="kw">in</span> all_images <span class="cf">if</span> file_name.startswith(<span class="st">'ISIC'</span>)]</span>
<span id="cb13-3"><a href="#cb13-3"></a>columns <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>rows <span class="op">=</span> (<span class="bu">len</span>(isic_images) <span class="op">+</span> columns <span class="op">-</span> <span class="dv">1</span>) <span class="op">//</span> columns</span>
<span id="cb13-5"><a href="#cb13-5"></a>fig, ax <span class="op">=</span> plt.subplots(rows, columns, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">4</span><span class="op">*</span>rows))</span>
<span id="cb13-6"><a href="#cb13-6"></a>ax <span class="op">=</span> ax.flatten()</span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="cf">for</span> index, image_name <span class="kw">in</span> <span class="bu">enumerate</span>(isic_images):</span>
<span id="cb13-8"><a href="#cb13-8"></a>    image_path <span class="op">=</span> os.path.join(<span class="st">'../images'</span>, image_name)</span>
<span id="cb13-9"><a href="#cb13-9"></a>    image <span class="op">=</span> Image.<span class="bu">open</span>(image_path)</span>
<span id="cb13-10"><a href="#cb13-10"></a>    metadata <span class="op">=</span> metadata_df[metadata_df[<span class="st">'image_id'</span>] <span class="op">==</span> image_name.removesuffix(<span class="st">'.jpg'</span>)]</span>
<span id="cb13-11"><a href="#cb13-11"></a>    ax[index].imshow(image)</span>
<span id="cb13-12"><a href="#cb13-12"></a>    ax[index].set_title(<span class="ss">f'</span><span class="sc">{</span>metadata[<span class="st">'dx'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>metadata[<span class="st">'age'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">:.0f}</span><span class="ss"> years - </span><span class="sc">{</span>metadata[<span class="st">'localization'</span>]<span class="sc">.</span>iloc[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb13-13"><a href="#cb13-13"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="datenexploration_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="analyse-von-abhängigkeiten-und-auffälligkeiten" class="level1">
<h1>Analyse von Abhängigkeiten und Auffälligkeiten</h1>
<p>Die Darstellungen und Ergebnisse aus <a href="#sec-metriken" class="quarto-xref">Kapitel&nbsp;2</a> lassen vermuten, dass es Abhängigkeiten zwischen den im Datensatz aufgeführten Attributen gibt. Siehe dazu <a href="#fig-altersverteilung" class="quarto-xref">Abbildung&nbsp;5</a>, <a href="#fig-koerperstellen-diagnose-gefaehrlich" class="quarto-xref">Abbildung&nbsp;10</a>, <a href="#fig-koerperstellen-atler-gefaehrlich" class="quarto-xref">Abbildung&nbsp;8</a> und <a href="#tbl-koerperstellen-gefaerlich" class="quarto-xref">Tabelle&nbsp;5</a>.</p>
<section id="sec-korrelation" class="level2">
<h2 class="anchored" data-anchor-id="sec-korrelation">Korrelationsanalyse nach Spearman</h2>
<p>Ein Weg um diesen Zusammenhang zu untersuchen ist der Korrelationskoeffizient nach Spearman <span class="citation" data-cites="kendall1973advanced"><a href="#ref-kendall1973advanced" role="doc-biblioref">[2]</a></span>.</p>
<p>Die Wahl des Spearman-Korrelationskoeffizienten rechtfertigt sich durch die folgenden Eingeschaften:</p>
<ol type="1">
<li>Er setzt keine Normalverteilung voraus</li>
<li>Er misst den monotonen Zusammenhang zwischen zwei Merkmalen</li>
<li>Er ist robust gegenüber Ausreißern, da auf Rangwerte zurückgegriffen wird</li>
<li>Er eignet sich für ordinal skalierte oder kategorisiert kodierte Merkmale, wie sie im Datensatz vorliegen</li>
</ol>
<p>Seien <span class="math inline">\(X=(x_1, x_2, ...,x_n)\)</span> und <span class="math inline">\(Y=(y_1, y_2, ..., y_n)\)</span> zwei Merkmalsreihen mit <span class="math inline">\(n\)</span> Beobachtungen. Dann ist der Spearman-Korrelationskoeffizient <span class="math inline">\(\rho_s\)</span> definiert als Pearson-Korrelationskoeffizient der Rangwerte <span class="math inline">\(R(x_i)\)</span> und <span class="math inline">\(R(y_i)\)</span> mit <span class="math inline">\(d_i = R(x_i) - R(y_i)\)</span>:</p>
<p><span class="math display">\[
\rho_s = 1 - \frac{6 \sum_{i=1}^{n} d_i^2}{n(n^2 - 1)}
\]</span></p>
<p>Angewendet auf den in <a href="#sec-erklaerung_datensatz" class="quarto-xref">Kapitel&nbsp;1</a> beschriebenen Datensatz ergibt sich die in <a href="#fig-korrelationsmatrix-datensatz" class="quarto-xref">Abbildung&nbsp;12</a> dargestellt Korrelationsmatrix. Es lässt sich ein Zusammenhang zwischen <code>dx</code> und <code>age</code> sowie <code>dx_type</code> und <code>dx</code> erkennen.</p>
<div id="cell-fig-korrelationsmatrix-datensatz" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb14-2"><a href="#cb14-2"></a>sns.heatmap(</span>
<span id="cb14-3"><a href="#cb14-3"></a>    data<span class="op">=</span>corr_matrix,</span>
<span id="cb14-4"><a href="#cb14-4"></a>    annot<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-5"><a href="#cb14-5"></a>    cmap<span class="op">=</span><span class="st">'coolwarm'</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>    fmt<span class="op">=</span><span class="st">'.2f'</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>)</span>
<span id="cb14-8"><a href="#cb14-8"></a>plt.yticks(rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb14-9"><a href="#cb14-9"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-korrelationsmatrix-datensatz" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-korrelationsmatrix-datensatz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-korrelationsmatrix-datensatz-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-korrelationsmatrix-datensatz-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;12: Korrelationsmatrix des Datensatzes
</figcaption>
</figure>
</div>
</div>
</div>
<p>Das der Zusammenhang der Variablen im gesamten Datensatz nicht besonders signifikant ist (mit Ausnahme des Alters) lässt sich ebenfalls visuell in <a href="#fig-pairgrid" class="quarto-xref">Abbildung&nbsp;13</a> erkennen. Somit lässt sich aus den Ergebnissen von <a href="#sec-metriken" class="quarto-xref">Kapitel&nbsp;2</a> und <a href="#sec-korrelation" class="quarto-xref">Kapitel&nbsp;3.1</a> schlussfolgern, dass das Risiko für gefährliche Diagnosen mit dem Alter zunimmt. Dies wird ebenfalls in <a href="#fig-altersverteilung-gefaehrliche-diagnosen" class="quarto-xref">Abbildung&nbsp;14</a> visualisiert. Zudem lässt sich anhand von <a href="#fig-koerperstellen-diagnose-gefaehrlich" class="quarto-xref">Abbildung&nbsp;10</a> erkennen, dass es wahrscheinlicher ist, eine gefährliche Diagnose im Bereich des Rückens, Gesichts oder der oberen Extremität zu erhalten. Diese Verteilung kann aber zum Teil auf die Anzahl der Muttermale an den jeweiligen Körperstellen zurückgeführt werden (siehe dazu <a href="#fig-koerperstellen-atler" class="quarto-xref">Abbildung&nbsp;7</a>). Einen interessanten Zusammenhang, beschreibt die Anzahl der gefährlichen Diagnosen an einer Körperstelle in Relation zu den gesamten Diagnosen an der jeweiligen Stelle (siehe <a href="#tbl-koerperstellen-gefaerlich" class="quarto-xref">Tabelle&nbsp;5</a>). Auffällig ist, dass unbedeckte Körperstellen, welche viel Sonneneinstrahlung abbekommen tendenziell gefährdeter sind als bspw. der Genitalbereich.</p>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb15-2"><a href="#cb15-2"></a>grid <span class="op">=</span> sns.PairGrid(metadata_df[predictor_columns], diag_sharey<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-3"><a href="#cb15-3"></a>grid.map_upper(sns.scatterplot, s<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb15-4"><a href="#cb15-4"></a>grid.map_lower(sns.kdeplot)</span>
<span id="cb15-5"><a href="#cb15-5"></a>grid.map_diag(sns.kdeplot, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb15-6"><a href="#cb15-6"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-pairgrid" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pairgrid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div id="f752e2d3" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<pre><code>&lt;Figure size 960x576 with 0 Axes&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="datenexploration_files/figure-html/cell-18-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pairgrid-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;13: : Paar Gatter der Prädiktor Attribute
</figcaption>
</figure>
</div>
</section>
<section id="anzahl-der-gefährlichen-diagnosen-nach-alter" class="level2">
<h2 class="anchored" data-anchor-id="anzahl-der-gefährlichen-diagnosen-nach-alter">Anzahl der gefährlichen Diagnosen nach Alter</h2>
<div id="cell-fig-altersverteilung-gefaehrliche-diagnosen" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>plt.figure(figsize<span class="op">=</span>STANDARD_FIGSIZE)</span>
<span id="cb17-2"><a href="#cb17-2"></a>sns.histplot(</span>
<span id="cb17-3"><a href="#cb17-3"></a>    data<span class="op">=</span>metadata_df,</span>
<span id="cb17-4"><a href="#cb17-4"></a>    x<span class="op">=</span><span class="st">'age_group'</span>,</span>
<span id="cb17-5"><a href="#cb17-5"></a>    hue<span class="op">=</span><span class="st">'is_dangerous'</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>    palette<span class="op">=</span>DANGEROUS_PALETTE,</span>
<span id="cb17-7"><a href="#cb17-7"></a>    multiple<span class="op">=</span><span class="st">'stack'</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>)</span>
<span id="cb17-10"><a href="#cb17-10"></a>plt.xlabel(<span class="st">'Altersgruppe'</span>)</span>
<span id="cb17-11"><a href="#cb17-11"></a>plt.ylabel(<span class="st">'Anzahl Läsionen'</span>)</span>
<span id="cb17-12"><a href="#cb17-12"></a>plt.show()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-altersverteilung-gefaehrliche-diagnosen" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-altersverteilung-gefaehrliche-diagnosen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="datenexploration_files/figure-html/fig-altersverteilung-gefaehrliche-diagnosen-output-1.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-altersverteilung-gefaehrliche-diagnosen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;14: Anzahl der gefährlichen Diagnosen nach Alter
</figcaption>
</figure>
</div>
</div>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Literatur</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-HAM100002018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">P. Tschandl und V. Group, <span>„The HAM10000 dataset, a large collection of multi-source dermatoscopic images of common pigmented skin lesions“</span>. <a href="https://dataverse.harvard.edu/citation?persistentId=doi:10.7910/DVN/DBW86T" class="uri">https://dataverse.harvard.edu/citation?persistentId=doi:10.7910/DVN/DBW86T</a>, 2018. doi: <a href="https://doi.org/10.7910/DVN/DBW86T">10.7910/DVN/DBW86T</a>.</div>
</div>
<div id="ref-kendall1973advanced" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">M. G. Kendall und A. Stuart, <span>„Kapitel 31.19, 31.21“</span>, in <em>The Advanced Theory of Statistics, Volume 2: Inference and Relationship</em>, London: Griffin, 1973.</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Kopiert");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Kopiert");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>